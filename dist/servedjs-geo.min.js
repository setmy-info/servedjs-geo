/*!
 * MIT License
 *
 * Copyright (c) 2017-2020 Imre Tabur <imre.tabur@eesti.ee>
 */
"use strict";!function(t){(t.jsdi=t.jsdi||{}).service("$geo",function(){return{DEGREE_METERS:111134,paths:{},newWatcher:function(i,t,e){return{success:function(t){i({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,speed:t.coords.speed,heading:t.coords.heading,timestamp:t.timestamp})},error:t,options:e||{enableHighAccuracy:!0,maximumAge:0},watchId:null,start:function(){this.watchId=navigator.geolocation.watchPosition(this.success,this.error,this.options)},stop:function(){navigator.geolocation.clearWatch(this.watchId),this.watchId=null}}},newPath:function(t){return{points:t,end:t[t.size-1],calculations:{length:0,middlePosition:-1,middle:null},travelAndCalc:function(){var t;for(this.points[0],t=1;t<this.points.length;t++)this.points[t]},reArange:function(t,i){var e,n,o=i-t,c=0,a=[];for(n=t<i?(e=t,1):(e=i,-1);0<o&&e<=i||o<0&&i<=e;e+=n,c++)a[c]=this.points[e];this.end=a[a.size-1],this.points=a}}},addPath:function(t,i){var e=this.newPath(i);e.name=t,this.paths[t]=e},pointInMeters:function(t){return{latitude:this.DEGREE_METERS*t.latitude,longitude:this.calcLongitudeMetersCoeficent(t.latitude)*t.longitude}},calcLongitudeMetersCoeficent:function(t){return this.DEGREE_METERS*this.calcLatitudeCoeficent(t)},calcLatitudeCoeficent:function(t){return Math.cos(this.calcDegreeRadians(t))},calcDegreeRadians:function(t){return Math.PI*t/180}}})}("undefined"==typeof window?global:window);